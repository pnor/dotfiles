# === Run on Startup ======================================================
exec_always "echo ===========================\n Sway Reloaded --"
# Swaymond
exec_always "pkill -f 'python3? .+/swaymonad.py';  ~/.config/sway/swaymonad/swaymonad.py"
# Emacs
exec "/home/phil/.local/share/scripts/start-emacs-daemon.sh"
# Dunst
exec "/usr/bin/dunst"
# Set background to the dither pattern, then fade into the actual selected background
exec "( /usr/local/bin/swww-daemon --no-cache & ) && swww img ~/.config/sway/start_img.png -t none && /home/phil/.local/bin/dynamic_paper random &"

# === Bar =================================================================
bar {
    swaybar_command waybar
    position top
    mode hide
}

# === Keybinds ============================================================
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
# ------

# Make main window
bindsym $mod+Return nop promote_window
# Move  between windows
bindsym $mod+j nop focus_next_window
bindsym $mod+k nop focus_prev_window

# Move windows around
# - arrow keys
bindsym $mod+Shift+Left nop move left
bindsym $mod+Shift+Down nop move down
bindsym $mod+Shift+Up nop move up
bindsym $mod+Shift+Right nop move right
# - with j and k
bindsym $mod+Shift+j nop swap_with_next_window
bindsym $mod+Shift+k nop swap_with_prev_window
# - reflections of where main window is
bindsym $mod+x nop reflectx
bindsym $mod+y nop reflecty
bindsym $mod+t nop transpose
# - fullscreen one window
bindsym $mod+f nop fullscreen

# Making more windows main
bindsym $mod+Comma nop increment_masters
bindsym $mod+Period nop decrement_masters

# Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4

# Move workspace with swipes
bindgesture swipe:right workspace prev
bindgesture swipe:left workspace next

# Resizing
mode "resize" {
  bindsym Left resize shrink width 10px
  bindsym Down resize grow height 10px
  bindsym Up resize shrink height 10px
  bindsym Right resize grow width 10px

  bindsym Shift+Left nop resize_master shrink width 10px
  bindsym Shift+Down nop resize_master grow height 10px
  bindsym Shift+Up nop resize_master shrink height 10px
  bindsym Shift+Right nop resize_master grow width 10px

  # bindsym n resize set width (n-1/n)
  bindsym 2 resize set width 50ppt  # 1/2, 1/2
  bindsym 3 resize set width 66ppt  # 2/3, 1/3
  bindsym 4 resize set width 75ppt  # 3/4, 1/4

  bindsym Shift+2 nop resize_master set width 50ppt
  bindsym Shift+3 nop resize_master set width 66ppt
  bindsym Shift+4 nop resize_master set width 75ppt

  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# - Setting layout
# TODO (Currently does nothing)
mode "layout" {
  bindsym t nop set_layout tall
  bindsym 3 nop set_layout 3_col
  bindsym n nop set_layout nop

  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindsym $mod+l mode "layout"

# === Settings + Behaviour ================================================

gaps inner 10

mouse_warping container
focus_wrapping no

default_border pixel 2
smart_borders on
smart_gaps on
# titlebar_padding 1
# titlebar_border_thickness 0

# Keyboard repeat settings
input 1452:850:Apple_MTP_keyboard {
   repeat_delay 200
   repeat_rate 90
}

# === Apps Keybinds ======================================================
set $term alacritty

bindsym $mod+Shift+Return exec $term
bindsym $mod+Shift+b exec qutebrowser
bindsym $mod+Shift+e exec emacsclient -c --socket-name emacsdaemon
bindsym $mod+Shift+r exec swaymsg reload
bindsym $mod+c kill

set $rofi-script-dir /home/phil/.local/share/scripts/rofi/bin
bindsym $mod+Space exec $rofi-script-dir/rofi-spotlight
bindsym $mod+w exec $rofi-script-dir/rofi-windows
bindsym $mod+grave exec $rofi-script-dir/rofi-power-menu
bindsym $mod+b exec $rofi-script-dir/rofi-misc-menu.sh

# === Colors =============================================================
# Colors
set $base00 #282828
set $base01 #3c3836
set $base02 #504945
set $base03 #665c54
set $base04 #d5c4a1
set $base05 #ebdbb2
set $base06 #fbf1c7
set $base07 #ebdbb2
set $base08 #cc241d
set $base09 #d65d0e
set $base0A #d79921
set $base0B #98971a
set $base0C #458588
set $base0D #b16286
set $base0E #689d6a
set $base0F #a89984

## Window Colours
client.focused   #eeeeee  #eeeeee  $base06  $base08  #eeeeee
client.focused_tab_title #eeeeee  #eeeeee  $base06  $base08  #eeeeee
client.focused_inactive  #555555  #555555  $base06  $base08  #555555
client.unfocused   #333333  #333333  $base06  $base08  #333333
client.urgent   $base07  $base00  $base08  $base0B  $base02
